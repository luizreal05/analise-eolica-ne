<!DOCTYPE html>
<html>
<head>
    <title>Compara√ß√£o E√≥lica NE - Restri√ß√£o vs Previs√£o</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #60AB56 0%, #AECC56 100%);
            min-height: 100vh;
        }
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            text-align: center;
        }
        h1 {
            color: #333;
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }
        .stats {
            color: #666;
            font-size: 1.1em;
            margin-top: 15px;
            line-height: 1.8;
        }
        .alert {
            background: #E3F2FD;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 15px;
            margin: 20px auto;
            max-width: 1200px;
            color: #0D47A1;
            font-weight: bold;
        }
        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            max-width: 1800px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        .section h2 {
            text-align: center;
            color: #2196F3;
            font-size: 2em;
            margin-bottom: 20px;
        }
        .section h3 {
            color: #4CAF50;
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .section img {
            width: 100%;
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .nav {
            text-align: center;
            margin: 30px 0;
        }
        .nav a {
            display: inline-block;
            margin: 0 10px;
            padding: 12px 30px;
            background: white;
            color: #2196F3;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transition: all 0.3s;
        }
        .nav a:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.25);
            background: #2196F3;
            color: white;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 1900px;
            margin: 0 auto;
        }
        .mes-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .mes-titulo {
            margin: 0 0 20px 0;
            color: #2196F3;
            font-size: 1.8em;
            border-bottom: 3px solid #2196F3;
            padding-bottom: 10px;
            text-align: center;
        }
        .plots-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .plot-card {
            display: flex;
            flex-direction: column;
        }
        .plot-card h4 {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 1.1em;
            text-align: center;
        }
        .plot-card img {
            width: 100%;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .plot-card img:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .lightbox {
            display: none;
            position: fixed;
            z-index: 999;
            padding-top: 50px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.95);
        }
        .lightbox-content {
            margin: auto;
            display: block;
            width: 95%;
            max-width: 1800px;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }
        .close:hover {
            color: #ff6b6b;
        }
        .legend {
            background: #FFF3CD;
            border: 2px solid #FF9800;
            border-radius: 10px;
            padding: 20px;
            margin: 20px auto;
            max-width: 1200px;
        }
        .legend h4 {
            color: #F57C00;
            margin-top: 0;
            font-size: 1.3em;
        }
        .legend ul {
            margin: 10px 0;
            padding-left: 25px;
        }
        .legend li {
            color: #856404;
            margin: 8px 0;
            font-size: 1.05em;
        }
        .legend strong {
            color: #E65100;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä Compara√ß√£o E√≥lica Nordeste</h1>
        <div class="stats">
            üéØ <strong>OBJETIVO:</strong> Comparar dados de gera√ß√£o e√≥lica do Nordeste entre duas fontes<br>
            üì¶ <strong>Fonte 1:</strong> tbl_restricao_eolica (middle) - Dados de restri√ß√£o agregados por semi-hora<br>
            üìä <strong>Fonte 2:</strong> tbl_renovaveis (dessem) - Campo NE_UEE (previs√£o NE)<br>
            üîç <strong>An√°lise:</strong> Compara√ß√£o com gr√°ficos de barras mensais e s√©rie temporal
        </div>
    </div>

    <div class="legend">
        <h4>üìñ Legenda das S√©ries</h4>
        <ul>
            <li><strong style="color: #2196F3;">Gera√ß√£o Real (barras azuis):</strong> Soma de val_geracao da tbl_restricao_eolica (subsistema NE)</li>
            <li><strong style="color: #FF9800;">Gera√ß√£o Refer√™ncia (barras laranjas):</strong> Soma de val_geracaoreferencia da tbl_restricao_eolica (subsistema NE)</li>
            <li><strong style="color: #4CAF50;">Previs√£o NE_UEE (linha verde):</strong> Campo NE_UEE da tbl_renovaveis (previs√£o de e√≥lica no Nordeste)</li>
        </ul>
    </div>

    <!-- Plots Comparativos Gerais -->
    <div class="section">
        <h2>üìà Visualiza√ß√µes Gerais</h2>

        <h3>Compara√ß√£o Mensal - Barras com Linha de Previs√£o</h3>
        <p style="text-align: center; color: #666; font-size: 1.05em; margin-bottom: 20px;">
            Barras representam as m√©dias mensais de Gera√ß√£o Real e Refer√™ncia. A linha verde mostra a Previs√£o NE_UEE.
        </p>
        <img src="resultados/barras_mensal.png"
             onclick="openLightbox('resultados/barras_mensal.png')"
             alt="Compara√ß√£o Mensal - Barras">
    </div>

    <!-- Navega√ß√£o -->
    <div class="nav">
        <a href="#mensal">üìä An√°lise Mensal Detalhada</a>
        <a href="tabelas_modulacao.html">üìã Tabelas de Modula√ß√£o por M√™s</a>
        <a href="comparacao_anos.html">üìÖ Compara√ß√£o entre Anos</a>
    </div>

    <!-- Plots Mensais -->
    <div class="section" id="mensal">
        <h2>üìÖ An√°lise Mensal Detalhada</h2>
        <p style="text-align: center; color: #666; font-size: 1.1em; margin-bottom: 30px;">
            <strong>Cada m√™s apresenta 4 an√°lises:</strong><br>
            üìä <strong>1. Semi-hor√°rio:</strong> Compara√ß√£o temporal completa (resolu√ß√£o 30 min) |
            üìà <strong>2. Di√°rio:</strong> M√©dias di√°rias<br>
            üìâ <strong>3. Modula√ß√£o Di√°ria:</strong> Padr√£o intradi√°rio m√©dio (% da m√©dia di√°ria) |
            üìã <strong>4. Tabela:</strong> Valores de modula√ß√£o por hora<br>
            <em>Ordenado do mais recente para o mais antigo ‚Ä¢ Clique nas imagens para ampliar</em>
        </p>
        <div class="container" id="container-mensal">
            <!-- Ser√° preenchido dinamicamente -->
        </div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <script>
        function openLightbox(imgSrc) {
            document.getElementById('lightbox').style.display = 'block';
            document.getElementById('lightbox-img').src = imgSrc;
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeLightbox();
            }
        });

        // Fun√ß√£o para listar os arquivos de imagem
        async function carregarImagens() {
            // Meses dispon√≠veis (gerados pelo script) - DO MAIS NOVO PARA O MAIS ANTIGO
            const meses = [
                '2025-10', '2025-09', '2025-08', '2025-07', '2025-06', '2025-05',
                '2025-04', '2025-03', '2025-02', '2025-01',
                '2024-12', '2024-11', '2024-10', '2024-09', '2024-08', '2024-07',
                '2024-06', '2024-05', '2024-04', '2024-03', '2024-02', '2024-01',
                '2023-12', '2023-11', '2023-10', '2023-09', '2023-08', '2023-07',
                '2023-06', '2023-05', '2023-04', '2023-03', '2023-02', '2023-01',
                '2022-12', '2022-11', '2022-10', '2022-09',
                '2022-08', '2022-07', '2022-06', '2022-05', '2022-02', '2022-01',
                '2021-12', '2021-10'
            ];

            const containerMensal = document.getElementById('container-mensal');

            meses.forEach(mes => {
                // Caminhos das imagens
                const imgSemihorario = `resultados/mensal/${mes}_semihorario.png`;
                const imgDiario = `resultados/mensal/${mes}_diario.png`;
                const imgModulacao = `resultados/mensal/${mes}_modulacao.png`;
                const imgTabela = `resultados/mensal/${mes}_tabela.png`;

                // Container do m√™s
                const mesContainer = document.createElement('div');
                mesContainer.className = 'mes-container';
                mesContainer.innerHTML = `
                    <h3 class="mes-titulo">üìÖ ${mes}</h3>

                    <!-- Linha 1: Semi-hor√°rio + Di√°rio -->
                    <div class="plots-row">
                        <div class="plot-card">
                            <h4>üìä Semi-hor√°rio</h4>
                            <img src="${imgSemihorario}"
                                 onclick="openLightbox('${imgSemihorario}')"
                                 alt="${mes} Semi-hor√°rio"
                                 onerror="this.parentElement.parentElement.parentElement.style.display='none'">
                        </div>
                        <div class="plot-card">
                            <h4>üìà Di√°rio</h4>
                            <img src="${imgDiario}"
                                 onclick="openLightbox('${imgDiario}')"
                                 alt="${mes} Di√°rio"
                                 onerror="this.parentElement.parentElement.parentElement.style.display='none'">
                        </div>
                    </div>

                    <!-- Linha 2: Modula√ß√£o + Tabela -->
                    <div class="plots-row">
                        <div class="plot-card">
                            <h4>üìâ Modula√ß√£o Di√°ria</h4>
                            <img src="${imgModulacao}"
                                 onclick="openLightbox('${imgModulacao}')"
                                 alt="${mes} Modula√ß√£o"
                                 onerror="this.parentElement.parentElement.parentElement.style.display='none'">
                        </div>
                        <div class="plot-card">
                            <h4>üìã Tabela por Hora</h4>
                            <img src="${imgTabela}"
                                 onclick="openLightbox('${imgTabela}')"
                                 alt="${mes} Tabela"
                                 onerror="this.parentElement.parentElement.parentElement.style.display='none'">
                        </div>
                    </div>
                `;
                containerMensal.appendChild(mesContainer);
            });
        }

        // Carregar imagens quando a p√°gina carregar
        window.addEventListener('load', carregarImagens);
    </script>
</body>
</html>
